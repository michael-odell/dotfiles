#compdef nook

_message 'hi'
local -a config_files clusters

# Available nooks are defined by:
# - the set of kube configs that exist here named config.NOOK OR
# - by directories in .kube containing a kubeconfig file
clusters=( $HOME/.kube/config.*(N:t:s/config\.//) $HOME/.kube/*/kubeconfig(N:h:t) )

if (( ${#clusters} > 0 )) ; then
    _arguments '1:cluster name:($clusters)'
else
    _message "No config.* files found in ~/.kube"
fi
# vim: set ft=zsh:
