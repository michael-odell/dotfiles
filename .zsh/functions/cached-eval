mkdir -p ~/.cache/cached-eval
local filename=~/.cache/cached-eval/"${argv[*]//[^-A-Za-z0-9]/_}"

if (( ! ${#argv} )) ; then
    echo "cached-eval: no command supplied" >&2
    return 1
fi

if [[ ! -e "${filename}" ]] ; then
    echo "cached-eval: Generating cache for ${argv[*]}" >&2
    "${argv[@]}" > ${filename}
fi
eval "$(< ${filename} )"

# vim: set ft=zsh:
